<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Admin Review Panel - STIF Sustainability Technology and Innovation Forum">
    <title>Admin Panel | STIF - Sustainability Technology and Innovation Forum</title>
    
    <!-- STIF Fonts: Roboto with Montserrat fallback -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
    <style>
        .admin-tabs {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-6);
            border-bottom: 2px solid var(--gray-200);
            padding-bottom: var(--space-2);
        }
        .admin-tab {
            padding: var(--space-3) var(--space-5);
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
            font-weight: 600;
            color: var(--gray-500);
            cursor: pointer;
            transition: all var(--transition);
            background: none;
            border: none;
        }
        .admin-tab:hover {
            color: var(--gray-700);
            background: var(--gray-50);
        }
        .admin-tab.active {
            color: var(--primary-700);
            background: var(--primary-50);
            border-bottom: 2px solid var(--primary-500);
            margin-bottom: -2px;
        }
        .review-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-bottom: var(--space-4);
            box-shadow: var(--shadow);
            transition: all var(--transition);
        }
        .review-card:hover {
            box-shadow: var(--shadow-lg);
        }
        .review-actions {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-4);
            padding-top: var(--space-4);
            border-top: 1px solid var(--gray-100);
        }
        .panel-review-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-bottom: var(--space-4);
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all var(--transition);
            border-left: 4px solid var(--warning);
        }
        .panel-review-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateX(4px);
        }
        .panel-review-card.approved {
            border-left-color: var(--success);
        }
        .panel-review-card.rejected {
            border-left-color: var(--error);
        }
        .indicator-review-item {
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            margin-bottom: var(--space-3);
        }
        .indicator-review-item:last-child {
            margin-bottom: 0;
        }
    </style>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-inner">
            <a href="/" class="logo">
                <img src="assets/images/logo1.jpg" alt="STIF Logo" class="logo-img">
                <span class="logo-text">Sustainability Technology and Innovation Forum</span>
            </a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="/" class="nav-link">Home</a></li>
                    <li><a href="/champion-dashboard.html" class="nav-link">Dashboard</a></li>
                    <li><a href="/champion-panels.html" class="nav-link">Panels</a></li>
                    <li><a href="/admin-review.html" class="nav-link active">Admin</a></li>
                </ul>
            </nav>
            <div class="nav-actions"></div>
            <button class="mobile-menu-toggle" aria-label="Toggle menu">
                <span></span><span></span><span></span>
            </button>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu">
        <button class="mobile-menu-close">&times;</button>
        <ul class="mobile-nav-menu"></ul>
    </div>

    <!-- Main Content -->
    <main style="padding-top: 100px; min-height: 100vh; background: var(--gray-50);">
        <div class="container">
            <!-- Header -->
            <div class="flex-between mb-6">
                <div>
                    <h1>Admin Panel</h1>
                    <p class="text-secondary">Manage reviews, panels, and indicators</p>
                </div>
                <button class="btn btn-secondary" id="export-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    Export Data
                </button>
            </div>

            <!-- Admin Tabs -->
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="panel-reviews">
                    Panel Reviews
                    <span class="badge badge-warning" id="panel-pending-count" style="margin-left: var(--space-2);">0</span>
                </button>
                <button class="admin-tab" data-tab="reviews">
                    Indicator Reviews
                    <span class="badge badge-warning" id="pending-count" style="margin-left: var(--space-2);">0</span>
                </button>
                <button class="admin-tab" data-tab="panels">Panels</button>
                <button class="admin-tab" data-tab="indicators">Indicators</button>
                <button class="admin-tab" data-tab="champions">Champions</button>
            </div>

            <!-- Loading State -->
            <div id="loading-state" class="flex-center" style="height: 300px;">
                <div class="loading-spinner"></div>
            </div>

            <!-- Tab Content -->
            <div id="admin-content" class="hidden">
                <!-- Panel Reviews Tab -->
                <div id="tab-panel-reviews" class="tab-content">
                    <div id="panel-reviews-queue">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Indicator Reviews Tab -->
                <div id="tab-reviews" class="tab-content hidden">
                    <div id="reviews-queue">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Panels Tab -->
                <div id="tab-panels" class="tab-content hidden">
                    <div class="flex-between mb-4">
                        <h3>ESG Panels</h3>
                        <button class="btn btn-primary" id="add-panel-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Add Panel
                        </button>
                    </div>
                    <div id="panels-list">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Indicators Tab -->
                <div id="tab-indicators" class="tab-content hidden">
                    <div class="flex-between mb-4">
                        <h3>ESG Indicators</h3>
                        <button class="btn btn-primary" id="add-indicator-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Add Indicator
                        </button>
                    </div>
                    <div id="indicators-list">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Champions Tab -->
                <div id="tab-champions" class="tab-content hidden">
                    <h3 class="mb-4">Champions</h3>
                    <div id="champions-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Review Modal -->
    <div class="modal-backdrop" id="review-modal-backdrop">
        <div class="modal" id="review-modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title" id="review-modal-title">Review Details</h3>
                <button class="modal-close" id="review-modal-close">&times;</button>
            </div>
            <div class="modal-body" id="review-modal-body">
                <!-- Populated by JS -->
            </div>
            <div class="modal-footer" id="review-modal-footer">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <!-- Panel Review Modal -->
    <div class="modal-backdrop" id="panel-review-modal-backdrop">
        <div class="modal" id="panel-review-modal" style="max-width: 700px; max-height: 80vh;">
            <div class="modal-header">
                <h3 class="modal-title" id="panel-review-modal-title">Panel Review Details</h3>
                <button class="modal-close" id="panel-review-modal-close">&times;</button>
            </div>
            <div class="modal-body" id="panel-review-modal-body" style="max-height: 60vh; overflow-y: auto;">
                <!-- Populated by JS -->
            </div>
            <div class="modal-footer" id="panel-review-modal-footer">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <!-- Add Panel Modal -->
    <div class="modal-backdrop" id="add-panel-modal-backdrop">
        <div class="modal" id="add-panel-modal" style="max-width: 700px; max-height: 90vh;">
            <div class="modal-header">
                <h3 class="modal-title">Add Panel</h3>
                <button class="modal-close" id="add-panel-modal-close">&times;</button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <form id="add-panel-form">
                    <!-- Panel Title -->
                    <div class="form-group">
                        <label class="form-label">Panel Title <span style="color: var(--error);">*</span></label>
                        <input type="text" class="form-input" id="panel-title" name="title" placeholder="e.g., Climate & GHG Emissions Panel" required>
                        <span class="form-error" id="panel-title-error"></span>
                    </div>

                    <!-- Panel Category + Impact (two columns) -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4);">
                        <div class="form-group">
                            <label class="form-label">Panel Category <span style="color: var(--error);">*</span></label>
                            <select class="form-select" id="panel-category" name="category" required>
                                <option value="">Select category</option>
                                <option value="Energy & Resource Use">Energy & Resource Use</option>
                                <option value="Climate & GHG Emissions">Climate & GHG Emissions</option>
                                <option value="Water, Waste & Circularity">Water, Waste & Circularity</option>
                                <option value="Biodiversity & Land Use">Biodiversity & Land Use</option>
                                <option value="Pollution & Air Quality">Pollution & Air Quality</option>
                                <option value="Workforce & Labour Practices">Workforce & Labour Practices</option>
                                <option value="Diversity, Equity & Inclusion (DEI)">Diversity, Equity & Inclusion (DEI)</option>
                                <option value="Human Rights & Supply Chain">Human Rights & Supply Chain</option>
                                <option value="Community & Social Impact">Community & Social Impact</option>
                                <option value="Health & Safety">Health & Safety</option>
                                <option value="Ethics, Compliance & Anti-Corruption">Ethics, Compliance & Anti-Corruption</option>
                                <option value="Risk Management & Resilience">Risk Management & Resilience</option>
                                <option value="Data Privacy & Cybersecurity">Data Privacy & Cybersecurity</option>
                                <option value="Product Responsibility & Quality">Product Responsibility & Quality</option>
                                <option value="ESG Strategy, Materiality & Innovation">ESG Strategy, Materiality & Innovation</option>
                            </select>
                            <span class="form-error" id="panel-category-error"></span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Impact <span style="color: var(--error);">*</span></label>
                            <select class="form-select" id="panel-impact" name="impact" required>
                                <option value="">Select impact level</option>
                                <option value="High">High</option>
                                <option value="Medium">Medium</option>
                                <option value="Foundational">Foundational</option>
                            </select>
                            <span class="form-error" id="panel-impact-error"></span>
                        </div>
                    </div>

                    <!-- Description -->
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-textarea" id="panel-description" name="description" placeholder="Short description of what this panel covers." rows="3"></textarea>
                    </div>

                    <!-- ESG Classification + Primary Framework (two columns) -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4);">
                        <div class="form-group">
                            <label class="form-label">ESG Classification <span style="color: var(--error);">*</span></label>
                            <select class="form-select" id="panel-esg-classification" name="esgClassification" required>
                                <option value="">Select classification</option>
                                <option value="Environment">Environment</option>
                                <option value="Social">Social</option>
                                <option value="Governance">Governance</option>
                            </select>
                            <span class="form-error" id="panel-esg-classification-error"></span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Primary Framework <span style="color: var(--error);">*</span></label>
                            <select class="form-select" id="panel-framework" name="primaryFramework" required>
                                <option value="">Select framework</option>
                                <option value="GRI">GRI</option>
                                <option value="ESRS">ESRS</option>
                                <option value="SASB">SASB</option>
                                <option value="SME Hub">SME Hub</option>
                                <option value="Other">Other</option>
                            </select>
                            <span class="form-error" id="panel-framework-error"></span>
                        </div>
                    </div>

                    <!-- Related SDGs -->
                    <div class="form-group">
                        <label class="form-label">Related SDGs</label>
                        <select class="form-select" id="panel-sdgs" name="relatedSdgs" multiple size="7" style="height: auto;">
                            <option value="SDG 1">SDG 1 â€“ No Poverty</option>
                            <option value="SDG 2">SDG 2 â€“ Zero Hunger</option>
                            <option value="SDG 3">SDG 3 â€“ Good Health and Well-Being</option>
                            <option value="SDG 4">SDG 4 â€“ Quality Education</option>
                            <option value="SDG 5">SDG 5 â€“ Gender Equality</option>
                            <option value="SDG 6">SDG 6 â€“ Clean Water and Sanitation</option>
                            <option value="SDG 7">SDG 7 â€“ Affordable and Clean Energy</option>
                            <option value="SDG 8">SDG 8 â€“ Decent Work and Economic Growth</option>
                            <option value="SDG 9">SDG 9 â€“ Industry, Innovation and Infrastructure</option>
                            <option value="SDG 10">SDG 10 â€“ Reduced Inequalities</option>
                            <option value="SDG 11">SDG 11 â€“ Sustainable Cities and Communities</option>
                            <option value="SDG 12">SDG 12 â€“ Responsible Consumption and Production</option>
                            <option value="SDG 13">SDG 13 â€“ Climate Action</option>
                            <option value="SDG 14">SDG 14 â€“ Life Below Water</option>
                            <option value="SDG 15">SDG 15 â€“ Life on Land</option>
                            <option value="SDG 16">SDG 16 â€“ Peace, Justice and Strong Institutions</option>
                            <option value="SDG 17">SDG 17 â€“ Partnerships for the Goals</option>
                        </select>
                        <p class="form-helper">Hold <strong>Cmd (Mac)</strong> or <strong>Ctrl (Windows)</strong> to select multiple SDGs.</p>
                    </div>

                    <!-- Purpose -->
                    <div class="form-group">
                        <label class="form-label">Purpose</label>
                        <textarea class="form-textarea" id="panel-purpose" name="purpose" placeholder="Panel purpose or intended use." rows="2"></textarea>
                    </div>

                    <!-- Unicode + Icon (two columns) -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4);">
                        <div class="form-group">
                            <label class="form-label">Unicode (optional)</label>
                            <input type="text" class="form-input" id="panel-unicode" name="unicode" placeholder="e.g., U+1F30D">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Icon (Emoji or Unicode)</label>
                            <input type="text" class="form-input" id="panel-icon" name="icon" placeholder="e.g., ðŸŒ">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="display: flex; justify-content: flex-start; gap: var(--space-3);">
                <button type="button" class="btn btn-primary" id="save-panel-btn">Save Panel</button>
                <button type="button" class="btn btn-secondary" id="cancel-panel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Compact Footer (Dashboard variant) -->
    <footer class="footer-compact">
        <div class="container">
            <ul class="footer-compact-links">
                <li><a href="/terms.html">Terms of Service</a></li>
                <li><a href="/privacy.html">Privacy Policy</a></li>
                <li><a href="/cookie-policy.html">Cookie Policy</a></li>
            </ul>
            <div class="footer-compact-cta">
                <a href="#" class="btn btn-primary btn-sm">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Schedule
                </a>
            </div>
            <span class="footer-compact-copyright">&copy; 2025 STIF</span>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="supabase-service.js"></script>
    <script src="champion-auth-supabase.js"></script>
    <script src="champion-db-supabase.js"></script>
    <script src="dynamic-navigation.js"></script>
    <script src="mobile-menu.js"></script>
    <script src="logout.js"></script>
    <script src="admin-service.js"></script>
    <script src="admin-review.js"></script>
</body>
</html>

